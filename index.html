<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BWAM</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè¶</text></svg>">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/lucide-static@latest/dist/lucide.min.js"></script>

    <link rel="stylesheet" href="style.css">

    <script src="datalayer.js"></script>

    <script type="text/javascript" src="https://cdn.pc-rnd.c360a.salesforce.com/beacon/c360a/d2799336-52d2-4f39-832b-d481cbc97fed/scripts/c360a.min.js" async></script>

    <script type="text/javascript">
        window.CONSENT_STORAGE_KEY = 'bwam_consent_status';
        window.bwamScripts = {};
        window.bwamTranslations = { en: {}, de: {} };
        // Removed window.AppContext placeholder - script.js won't need view state from React now
    </script>

    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

</head>
<body class="pb-32 has-mountain-bg">

    <header class="bg-white/90 shadow-lg sticky top-0 z-50 w-full backdrop-blur-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-3 h-20">
                <div class="flex-shrink-0">
                    <a href="#home" id="logo-link" class="nav-section-link flex items-center group" title="BWAM Home">
                         <img src="images/bwam-logo.jpg" alt="BWAM Logo" class="h-10 md:h-12 w-auto mr-2 transition-transform duration-300 group-hover:scale-105" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
                        <span class="font-bold text-xl text-[var(--brand-red)]" style="display: none;" aria-hidden="true">BWAM</span>
                         <script>
                             // Fallback logic for broken logo image
                             document.addEventListener('DOMContentLoaded', () => { /* ... same as before ... */ });
                         </script>
                    </a>
                </div>

                <nav class="hidden md:flex items-center space-x-6 lg:space-x-8">
                    <div class="group relative">
                        <button class="nav-link text-base font-medium text-gray-600 hover:text-[var(--brand-red)] inline-flex items-center py-3 transition-colors duration-200" data-lang-key="nav.private_clients">
                            <i data-lucide="users" class="mr-1 h-4 w-4"></i>Private Clients <i data-lucide="chevron-down" class="ml-1 h-4 w-4 text-gray-400 group-hover:text-gray-500 transition-transform duration-200 group-hover:rotate-180"></i>
                        </button>
                        <div class="dropdown-menu">
                             <div class="py-1" role="none">
                                <a href="#accounts-cards" class="nav-section-link text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 hover:text-[var(--brand-red)] rounded-md transition-colors duration-150" role="menuitem" data-lang-key="nav.accounts_cards"><i data-lucide="credit-card" class="mr-2 h-4 w-4 inline-block"></i>Accounts & Cards</a>
                                <a href="#investing" class="nav-section-link text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 hover:text-[var(--brand-red)] rounded-md transition-colors duration-150" role="menuitem" data-lang-key="nav.investing"><i data-lucide="trending-up" class="mr-2 h-4 w-4 inline-block"></i>Investing</a>
                                <a href="#pensions" class="nav-section-link text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 hover:text-[var(--brand-red)] rounded-md transition-colors duration-150" role="menuitem" data-lang-key="nav.pensions"><i data-lucide="umbrella" class="mr-2 h-4 w-4 inline-block"></i>Pensions</a>
                                <a href="#financing" class="nav-section-link text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100 hover:text-[var(--brand-red)] rounded-md transition-colors duration-150" role="menuitem" data-lang-key="nav.financing"><i data-lucide="home" class="mr-2 h-4 w-4 inline-block"></i>Financing</a>
                            </div>
                        </div>
                    </div>
                    <a href="#business-clients" class="nav-section-link nav-link text-base font-medium text-gray-600 hover:text-[var(--brand-red)] py-3 inline-flex items-center transition-colors duration-200" data-lang-key="nav.business_clients"><i data-lucide="briefcase" class="mr-1 h-4 w-4"></i>Business Clients</a>
                    <a href="#institutional" class="nav-section-link nav-link text-base font-medium text-gray-600 hover:text-[var(--brand-red)] py-3 inline-flex items-center transition-colors duration-200" data-lang-key="nav.institutional"><i data-lucide="building-2" class="mr-1 h-4 w-4"></i>Institutional</a>
                    <a href="#about-us" class="nav-section-link nav-link text-base font-medium text-gray-600 hover:text-[var(--brand-red)] py-3 inline-flex items-center transition-colors duration-200" data-lang-key="nav.about_us"><i data-lucide="info" class="mr-1 h-4 w-4"></i>About Us</a>
                    <a href="#events" class="nav-section-link nav-link text-base font-medium text-gray-600 hover:text-[var(--brand-red)] py-3 inline-flex items-center transition-colors duration-200" data-lang-key="nav.events"><i data-lucide="calendar" class="mr-1 h-4 w-4"></i>Events</a>
                </nav>

                <div class="flex items-center space-x-3 sm:space-x-4">
                    <button aria-label="Search" class="p-2 text-gray-500 hover:text-[var(--brand-red)] rounded-full hover:bg-gray-100 transition-colors duration-200 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--brand-red)]" data-lang-key-aria="aria.search" title="Search" data-lang-key-title="aria.search">
                        <i data-lucide="search" class="h-5 w-5"></i>
                    </button>
                    <div id="react-profile-header" class="flex items-center"></div>
                    <div class="md:hidden">
                         <button id="mobile-menu-button" aria-label="Open menu" aria-expanded="false" class="p-2 text-gray-500 hover:text-[var(--brand-red)] rounded-md hover:bg-gray-100 transition-colors duration-200 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--brand-red)]" data-lang-key-aria="aria.open_menu">
                             <i data-lucide="menu" class="h-6 w-6"></i>
                         </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 w-full bg-white shadow-lg border-t border-gray-200 z-40">
             <div class="px-4 pt-4 pb-5 space-y-2">
                 <a href="#home" class="nav-section-link block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-[var(--brand-red)] transition-colors duration-150" data-lang-key="nav.private_clients"><i data-lucide="users" class="mr-2 h-5 w-5 inline-block"></i>Private Clients</a>
                 <a href="#business-clients" class="nav-section-link block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:bg-gray-100 hover:text-[var(--brand-red)] transition-colors duration-150" data-lang-key="nav.business_clients"><i data-lucide="briefcase" class="mr-2 h-5 w-5 inline-block"></i>Business Clients</a>
                 <a href="#institutional" class="nav-section-link block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:bg-gray-100 hover:text-[var(--brand-red)] transition-colors duration-150" data-lang-key="nav.institutional"><i data-lucide="building-2" class="mr-2 h-5 w-5 inline-block"></i>Institutional</a>
                 <a href="#about-us" class="nav-section-link block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:bg-gray-100 hover:text-[var(--brand-red)] transition-colors duration-150" data-lang-key="nav.about_us"><i data-lucide="info" class="mr-2 h-5 w-5 inline-block"></i>About Us</a>
                 <a href="#events" class="nav-section-link block px-3 py-2 rounded-md text-base font-medium text-gray-600 hover:bg-gray-100 hover:text-[var(--brand-red)] transition-colors duration-150" data-lang-key="nav.events"><i data-lucide="calendar" class="mr-2 h-5 w-5 inline-block"></i>Events</a>
             </div>
         </div>
    </header>

    <main id="main-content">
        <div id="static-content-wrapper">
             <section id="home" class="main-section ...">...</section>
            <section id="about-us" class="main-section ...">...</section>
            <section id="events" class="main-section ...">...</section>
            <section id="news" class="main-section ...">...</section>
            <section id="business-clients" class="main-section ... hidden">...</section>
            <section id="institutional" class="main-section ... hidden">...</section>
            <section id="accounts-cards" class="main-section ... hidden">...</section>
            <section id="investing" class="main-section ... hidden">...</section>
            <section id="pensions" class="main-section ... hidden">...</section>
            <section id="financing" class="main-section ... hidden">...</section>
            <section id="corporate-accounts" class="main-section ... hidden">...</section>
            <section id="business-financing" class="main-section ... hidden">...</section>
            <section id="cash-management" class="main-section ... hidden">...</section>

        </div> </main>

    <footer class="bg-gray-900 text-gray-400 py-16">
         ...
      </footer>

    <div id="consent-banner" class="fixed bottom-0 left-0 right-0 ...">...</div>

    <div id="advisor-modal" class="fixed inset-0 z-[110] ...">...</div>

    <div id="scroll-banker" class="hidden md:block">...</div>

    <script src="script.js"></script>
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useContext } = React;

        // --- Embedded Translations ---
        const translations = {
             en: {
                 login: "Login", logout: "Logout", profile: "Profile", settings: "Settings", welcome: "Welcome", language: "Language", emailPlaceholder: "Enter email", loginError: "Please enter a valid email.",
                 dropdown: { logout: "Logout" }, // Only Logout needed now
                 // Removed profilePage keys
                 aria: { search: "Search", open_menu: "Open menu", set_lang_en: "Set language to English", set_lang_de: "Set language to German" },
                 // Keep modal keys if modal is still used
                 modal: { close: "Close modal", title: "Find Your Advisor", advisor1_name: "Anna M√ºller", advisor1_title: "Senior Wealth Manager", advisor2_name: "Lukas Baumann", advisor2_title: "Investment Specialist", advisor3_name: "Sophie Dubois", advisor3_title: "Retirement Planning Expert", button_connect: "Connect", schedule_message: "Schedule an appointment with your advisor." }

             },
             de: {
                 login: "Anmelden", logout: "Ausloggen", profile: "Profil", settings: "Einstellungen", welcome: "Willkommen", language: "Sprache", emailPlaceholder: "E-Mail eingeben", loginError: "Bitte geben Sie eine g√ºltige E-Mail ein.",
                 dropdown: { logout: "Ausloggen" }, // Only Logout needed now
                 // Removed profilePage keys
                 aria: { search: "Suche", open_menu: "Men√º √∂ffnen", set_lang_en: "Sprache auf Englisch setzen", set_lang_de: "Sprache auf Deutsch setzen" },
                 // Keep modal keys if modal is still used
                  modal: { close: "Modal schlie√üen", title: "Finden Sie Ihren Berater", advisor1_name: "Anna M√ºller", advisor1_title: "Senior Verm√∂gensverwalterin", advisor2_name: "Lukas Baumann", advisor2_title: "Anlagespezialist", advisor3_name: "Sophie Dubois", advisor3_title: "Expertin f√ºr Vorsorgeplanung", button_connect: "Verbinden", schedule_message: "Vereinbaren Sie einen Termin mit Ihrem Berater." }
             }
        };
        window.bwamTranslations = translations;

        // --- Inline SVG Icons ---
        // Keep SVGs needed for HeaderApp (UserCircle, Logout, Globe)
        const UserCircleIcon = ({ size = 28 }) => ( <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="10" r="3"></circle><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"></path></svg> );
        const LogOutIcon = ({ size = 16 }) => ( <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg> );
        const GlobeIcon = ({ size = 16 }) => ( <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg> );
        // Other SVGs can be removed if not used elsewhere

        // --- Authentication Hook ---
        const useAuth = () => { /* ... same as before ... */
             const initialUser = JSON.parse(localStorage.getItem('bwamUser'));
             const [user, setUser] = useState(initialUser);
             const [loading, setLoading] = useState(true);
             useEffect(() => { const t = setTimeout(() => setLoading(false), 200); return () => clearTimeout(t); }, []);
             useEffect(() => { if (user) { localStorage.setItem('bwamUser', JSON.stringify(user)); } else { localStorage.removeItem('bwamUser'); } }, [user]);
             const login = (email) => { if (typeof email === 'string' && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { setUser({ email }); return true; } return false; };
             const logout = () => setUser(null);
             return { user, loading, login, logout };
        };

        // --- Simplified Application Context ---
        const AppContext = React.createContext();

        function AppProvider({ children }) {
            const auth = useAuth();
            const [language, setLanguage] = useState(document.documentElement.lang || 'en');
            // Removed 'view' state and 'changeView' function

            const t = useCallback((key) => {
                 if (!key) return '';
                try {
                    return key.split('.').reduce((obj, k) => obj && obj[k], translations[language]) || key;
                } catch (e) {
                    console.warn(`Translation key error: ${key} [${language}]`);
                    return key;
                }
            }, [language]);

            const changeLanguage = (newLang) => {
                if (translations[newLang] && newLang !== language) {
                    setLanguage(newLang);
                    document.documentElement.lang = newLang;
                    if (window.bwamScripts?.updateStaticContentLanguage) {
                         setTimeout(() => window.bwamScripts.updateStaticContentLanguage(newLang), 0);
                    } else {
                        console.warn("updateStaticContentLanguage function not found.");
                    }
                }
            };

             // No longer need view-related effects or context exposure

            // Pass only necessary values
            const value = { ...auth, language, changeLanguage, t };
            return <AppContext.Provider value={value}>{children}</AppContext.Provider>;
        }

        // --- Header Component (Simplified - No Profile Link/View Change) ---
        function HeaderApp() {
            // Get only needed context
            const { user, loading, login, logout, language, changeLanguage, t } = useContext(AppContext);
            const [isDropdownOpen, setIsDropdownOpen] = useState(false); // Renamed from isProfileOpen
            const [emailInput, setEmailInput] = useState('');
            const [loginError, setLoginError] = useState(false);
            const dropdownRef = useRef(null); // Renamed from profileRef

            useEffect(() => { // Click outside for dropdown
                const handleClickOutside = (event) => {
                    if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
                         // Check button id - needs adjustment if button ID changes
                         const userButton = document.getElementById('user-button');
                         if (!userButton || !userButton.contains(event.target)) {
                            setIsDropdownOpen(false);
                         }
                    }
                };
                document.addEventListener("mousedown", handleClickOutside);
                return () => document.removeEventListener("mousedown", handleClickOutside);
            }, []);

            const handleLogin = (e) => { /* ... same as before ... */
                e.preventDefault();
                setLoginError(false);
                const success = login(emailInput);
                if (!success) { setLoginError(true); }
                else { setEmailInput(''); if (window.bwamDataLayer?.trackLoginSuccess) window.bwamDataLayer.trackLoginSuccess(emailInput); }
             };

            const handleLogout = () => { /* ... same as before, no view change needed ... */
                 const loggedOutEmail = user?.email;
                 logout();
                 setIsDropdownOpen(false);
                 if (window.bwamDataLayer?.trackLogout) window.bwamDataLayer.trackLogout(loggedOutEmail);
                 // No need to change view or push history state
             };

            // Removed handleViewProfile function

            const getUsername = (email) => { /* ... same as before ... */
                 if (!email || !email.includes('@')) return 'User';
                 const namePart = email.split('@')[0];
                 return namePart.charAt(0).toUpperCase() + namePart.slice(1);
            };

            if (loading) {
                return null; // Use :empty CSS pseudo-class for loading state
            }

            return (
                <div className="flex items-center space-x-4">
                    {/* Language Switcher */}
                    <div className="flex items-center space-x-1 border border-gray-300 rounded-full px-2 py-1">
                        <GlobeIcon size={16} />
                        <button onClick={() => changeLanguage('en')} className={`text-sm font-medium rounded-full px-2 py-0.5 transition-colors duration-150 ${language === 'en' ? 'bg-[var(--brand-red)] text-white' : 'text-gray-600 hover:bg-gray-200'}`} aria-label={t('aria.set_lang_en')} title={t('aria.set_lang_en')}>EN</button>
                        <span className="text-gray-300">|</span>
                        <button onClick={() => changeLanguage('de')} className={`text-sm font-medium rounded-full px-2 py-0.5 transition-colors duration-150 ${language === 'de' ? 'bg-[var(--brand-red)] text-white' : 'text-gray-600 hover:bg-gray-200'}`} aria-label={t('aria.set_lang_de')} title={t('aria.set_lang_de')}>DE</button>
                    </div>

                    {/* Conditional: User Dropdown or Login Form */}
                    {user ? (
                        <div className="profile-dropdown-container" ref={dropdownRef}> {/* Use renamed ref */}
                            {/* Changed button ID slightly */}
                            <button id="user-button" onClick={() => setIsDropdownOpen(!isDropdownOpen)} className="flex items-center text-gray-600 hover:text-[var(--brand-red)] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--brand-red)] rounded-full p-1" aria-haspopup="true" aria-expanded={isDropdownOpen} title={t('profile')}>
                                <UserCircleIcon />
                            </button>
                            {/* Simplified Dropdown */}
                            {isDropdownOpen && (
                                <div className="profile-dropdown-menu">
                                    <div className="p-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white">
                                        <h3 className="font-semibold text-lg">{t('welcome')}, {getUsername(user.email)}</h3>
                                        <p className="text-sm opacity-90 truncate">{user.email}</p>
                                    </div>
                                    <nav className="border-t border-gray-100 py-1">
                                        {/* Removed My Profile & Settings links */}
                                        <button onClick={handleLogout} className="w-full text-left flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-150">
                                            <LogOutIcon /> <span className="ml-2">{t('dropdown.logout')}</span>
                                        </button>
                                    </nav>
                                </div>
                            )}
                        </div>
                    ) : (
                        <form onSubmit={handleLogin} className="login-form-container">
                            <input type="email" value={emailInput} onChange={(e) => { setEmailInput(e.target.value); setLoginError(false); }} placeholder={t('emailPlaceholder')} className={`${loginError ? 'error' : ''}`} required aria-label={t('emailPlaceholder')} aria-invalid={loginError} aria-describedby={loginError ? 'login-error-desc' : undefined}/>
                            <button type="submit">{t('login')}</button>
                            {loginError && <p id="login-error-desc" className="login-error-message">{t('loginError')}</p>}
                        </form>
                    )}
                </div>
            );
        }

        // --- ProfileSection Component REMOVED ---

        // --- Render React Component (Only HeaderApp) ---
        ReactDOM.render(
            <AppProvider>
                <HeaderApp />
            </AppProvider>,
            document.getElementById('react-profile-header')
        );
        // Removed ReactDOM.render call for ProfileSection

    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => { /* ... same as before ... */ });
     </script>

</body>
</html>
